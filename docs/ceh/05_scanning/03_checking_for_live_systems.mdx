---
sidebar_position: 3
slug: checking-for-live-systems
---

# بررسی سیستم‌های فعال

برای شروع، بیایید به دنبال اهدافی برای بررسی و کاوش بگردیم. به یاد داشته باشید که اگرچه ممکن است در فاز قبلی اطلاعاتی جمع‌آوری کرده باشید که IP یا محدوده IPهایی را که یک سازمان مالک آن است یا به آن متصل است توصیف می‌کند، این به این معنی نیست که هر آدرس یک میزبان (Host) در پشت خود دارد. برای پیشروی به هر روش معناداری، باید پیدا کنید که کدام IPها واقعاً «نبض» دارند و کدام‌ها ندارند.

پس چگونه سیستم‌های زنده را در یک محیط هدف بررسی می‌کنید؟ معلوم می‌شود که راه‌های زیادی برای انجام این کار وجود دارد. با این حال، روش‌های پذیرفته‌شده رایج برای انجام این کار عبارتند از:

*   شماره‌گیری جنگی (Wardialing)
*   رانندگی جنگی (Wardriving)
*   پینگ کردن (Pinging)
*   اسکن پورت (Port scanning)

هر یک از این تکنیک‌ها اطلاعاتی را ارائه می‌دهند که با روش‌های دیگر قابل دستیابی نیستند، یا حداقل به آن آسانی ارائه نمی‌شوند. هنگامی که تفاوت‌ها را درک کردید، ایده بسیار بهتری از نحوه استقرار این روش‌ها در یک تست نفوذ خواهید داشت.

:::tip
هنگام نگاه به این روش‌ها، به خاطر داشته باشید که باید به حوزه‌هایی که در آن هر روش قوی است و حوزه‌هایی که در آن ضعیف است توجه کنید. استقرار روش اشتباه می‌تواند به راحتی زمان را هدر دهد و همچنین مالک سیستم را از حضور شما آگاه کند و به آن‌ها زمان دهد تا به حضور شما واکنش نشان دهند.
:::

## شماره‌گیری جنگی (Wardialing)

اولین نوع اسکن یک روش قدیمی اما مفید است که به عنوان شماره‌گیری جنگی شناخته می‌شود. Wardialing از اواسط دهه ۱۹۸۰ تقریباً بدون تغییر وجود داشته و به این دلیل این‌قدر دوام آورده که ثابت کرده ابزار مفیدی برای جمع‌آوری اطلاعات است. در عمل، Wardialing نسبت به سایر اشکال اسکن بسیار ساده است؛ به این صورت که به سادگی یک بلوک از شماره‌های تلفن را با استفاده از یک مودم استاندارد شماره‌گیری می‌کند تا سیستم‌هایی را پیدا کند که مودم متصل دارند و اتصالات را می‌پذیرند. در ظاهر، این نوع تکنیک یک دایناسور دیجیتال به نظر می‌رسد، اما گول نخورید — این تکنیک هنوز بسیار مفید است. درک کنید که مودم‌ها هنوز به دلایل متعددی استفاده می‌شوند، از جمله هزینه کم فناوری، سهولت استفاده و در دسترس بودن خطوط تلفن که تقریباً همه جا هستند.

:::note
مودم‌ها و Dial-up هنوز به عنوان پشتیبان (Backup) برای فناوری‌های موجود مانند کابل، DSL و خطوط T1/T3 استفاده می‌شوند. ایده این است که اگر همه گزینه‌های اتصال دیگر شکست بخورند، خطوط تلفن همچنان باید در دسترس باشند (مگر در صورت حادثه یا قطعی بزرگ). شرکت‌ها هزینه کم و قابلیت اطمینان این فناوری را یک شبکه ایمنی خوب در صورت قطعی می‌دانند. فراموش نکنید که خطوط تلفن اغلب برای دستگاه‌های فکس و دستگاه‌های چندکاره در بسیاری از دفاتر و محیط‌ها استفاده می‌شوند.
:::

زمانی که یک مودم پیدا کردید و پاسخی دریافت کردید، سوال این است که با آن اطلاعات چه کنید. دستگاه‌هایی مانند سانترال‌های خصوصی (PBX)، فایروال‌ها، روترها و دستگاه‌های فکس گاهی اوقات مودم متصل دارند. اگر یک مهاجم به یک فایروال شماره‌گیری کند و دسترسی پیدا کند، یک محیط می‌تواند به سرعت بدون محافظت شود.

چیزی که باید در نظر گرفت این است که وقتی مهاجم به یک سیستم دسترسی پیدا می‌کند، ممکن است از آن به عنوان یک **نقطه چرخشی (Pivot Point)** استفاده کند. نقطه چرخشی یک سیستم به خطر افتاده است که سپس برای هدف قرار دادن سایر سیستم‌هایی که ممکن است در عمق محیط هدف باشند، استفاده می‌شود.

:::tip
یک مودم باید همیشه به عنوان یک روش دسترسی **در پشتی (Backdoor)** قابل دوام به یک محیط در نظر گرفته شود زیرا اغلب توسط مالکان آن‌ها به همین شکل استفاده می‌شوند. اگرچه مادربزرگ‌ها و پدربزرگ‌ها ممکن است هنوز از آن‌ها برای دسترسی به اینترنت استفاده کنند، اما آن‌ها بیشتر به عنوان روش‌هایی برای دسترسی به شبکه زمانی که همه وسایل دیگر در دسترس نیستند، استفاده می‌شوند.
:::

تعدادی برنامه Wardialing در طول سال‌ها ایجاد شده‌اند. در اینجا سه مورد از شناخته‌شده‌ترین آن‌ها آورده شده است:

*   **ToneLoc:** برنامه‌ای که با شماره‌گیری تصادفی یا شماره‌گیری در یک محدوده به دنبال بوق آزاد (Dial tone) می‌گردد. همچنین می‌تواند به دنبال فرکانس حامل مودم یا فکس باشد.
*   **THC-SCAN:** یک برنامه مبتنی بر DOS که می‌تواند از یک مودم برای شماره‌گیری محدوده‌ای از شماره‌ها در جستجوی فرکانس حامل از یک مودم یا فکس استفاده کند.
*   **NIKSUN’s PhoneSweep:** یکی از معدود گزینه‌های تجاری موجود در بازار Wardialing.

:::note
در آزمون CEH درباره Wardialing از شما سوال خواهد شد زیرا مکانیزمی معتبر برای حمله به یک شبکه است و احتمالاً تا مدت‌ها چنین خواهد ماند.
:::

## استفاده از Ping

ابزار آشناتری برای انجام اسکن، **Ping** است. پینگ ابزاری است که می‌تواند برای تعیین اتصال شبکه با تعیین اینکه آیا میزبان راه دور بالا (Up) یا پایین (Down) است، استفاده شود. اگرچه ابزاری بسیار ساده است، اما برای انجام فرآیند اسکن اولیه عالی است.

پینگ با استفاده از پیام **ICMP** (پروتکل پیام کنترل اینترنت) کار می‌کند، به همین دلیل است که این تکنیک **اسکن ICMP** نیز نامیده می‌شود. فرآیند با استفاده از یک سیستم برای ارسال درخواست اکو ICMP به سیستم دیگر کار می‌کند؛ اگر آن سیستم زنده باشد، یک پاسخ اکو ICMP بازمی‌گرداند.

برای استفاده از دستور پینگ در ویندوز یا لینوکس:

<div dir='ltr'>
    `ping <target IP>`
یا
    `ping <target hostname>`

</div>


:::tip
اگرچه می‌توانید با آدرس IP یا نام میزبان پینگ کنید، بهتر است عادت کنید ابتدا با آدرس IP پینگ کنید و سپس به سراغ روش نام میزبان بروید. اگر ابتدا از نام میزبان استفاده کنید و پاسخی دریافت نکنید، این ممکن است نشان‌دهنده مشکل DNS باشد نه یک سیستم در دسترس نبودن. از سوی دیگر، پینگ با آدرس IP همیشه باید به شما بگوید که آیا سیستم در دسترس است یا خیر.
:::

راه دیگری برای پینگ کردن سیستم راه دور وجود دارد که باید از آن آگاه باشید: انجام پینگ با استفاده از **nmap**. در خط فرمان ویندوز یا لینوکس، دستور زیر را وارد کنید:

<div dir='ltr'>
`nmap –sP –v <target IP address>`
</div>

اگر دستور با موفقیت یک میزبان زنده پیدا کند، پیامی بازمی‌گرداند مبنی بر اینکه آدرس IP بالا است و آدرس MAC و فروشنده کارت شبکه را (اگر بتواند تعیین کند) ارائه می‌دهد.

:::note اهمیت Nmap
نمی‌توانم برای آزمون CEH به اندازه کافی روی این موضوع تأکید کنم: **شما باید بدانید چگونه از nmap استفاده کنید.** اگر ندانید، در آماده‌سازی آزمون و فرآیند تست دادن دچار مشکل جدی خواهید شد — ناگفته نماند که برای دنیای واقعی به این مهارت‌ها نیاز خواهید داشت. nmap را مانند یک چاقوی سوئیسی در نظر بگیرید. کارهای متفاوت زیادی انجام می‌دهد که هر کدام به روش خود مفید هستند. من به شدت توصیه می‌کنم در طول مطالعه خود nmap را برای یک تست طولانی بردارید، یاد بگیرید هر سوئیچ و گزینه چه کاری انجام می‌دهد و نتایج چه شکلی هستند.
:::

یک سطح بالاتر از اسکن ICMP، **پینگ سوییپ (Ping Sweep)** است، که به این دلیل نام‌گذاری شده که از این تکنیک برای اسکن یا جارو کردن محدوده‌ای از IPها به دنبال میزبان‌های زنده استفاده می‌کنید. باز هم nmap با اجازه دادن به شما برای انجام یک اسکن سریع مفید واقع می‌شود. برای انجام این کار با nmap، به سادگی دستور زیر را وارد کنید:

<div dir='ltr'>
`nmap –sP –PE –PA<port numbers> <starting IP/ending IP>`
</div>

مثال:

<div dir='ltr'>
`nmap –sP –PE –PA21,23,80,3389 192.168.10.1-50`
</div>

پینگ سوییپ‌ها فوق‌العاده مؤثر هستند زیرا می‌توانند موجودی سیستم‌ها را به سرعت بسازند؛ با این حال، اشکالات بالقوه‌ای وجود دارد. اول، بسیاری از مدیران شبکه پینگ را در فایروال مسدود می‌کنند. دوم، سیستم‌های IDS یا IPS اغلب در شبکه‌های بزرگتر وجود دارند و به اسکن شما هشدار می‌دهند.

## Hping3: توپخانه سنگین

پینگ تنها بازی در شهر نیست. در واقع، تا حدودی محدود است و بنابراین ابزاری پیشرفته‌تر مانند **hping3** می‌تواند مفید باشد. به طور خلاصه، hping یک سازنده بسته (Packet Crafter) مبتنی بر خط فرمان TCP/IP است. این بدان معناست که نه‌تنها توانایی ارسال بسته‌ها در سراسر شبکه را دارد، بلکه امکان ایجاد بسته‌های سفارشی را نیز فراهم می‌کند که می‌توانند برای ارزیابی رفتار میزبان راه دور استفاده شوند.

بیایید ببینیم چگونه می‌توانیم hping3 را وادار کنیم مانند پینگ عمل کند:

<div dir='ltr'>
`hping3 -1 <domain name>`
</div>

سپس، بیایید بررسی کنیم که آیا فایروالی درخواست‌های پینگ را مسدود می‌کند یا خیر. می‌توانیم این کار را با تلاش برای ارسال یک بسته با پرچم **ACK** به هدف انجام دهیم:

<div dir='ltr'>
`hping3 -c 1 -V -p 80 -s 5050 -A <domain name>`
</div>

اگر این دستور پاسخی دریافت کند، سیستم زنده است و پورت هدف باز است. با این حال، اگر هیچ پاسخی بازگردانده نشود، ممکن است فایروالی بین اسکنر و هدف وجود داشته باشد.

:::note
hping3 و پیشینیان آن برای اجرا بر روی سیستم‌عامل لینوکس طراحی شده‌اند، اما به آن پلتفرم محدود نمی‌شوند. در واقع، این ابزار با کمی تلاش می‌تواند روی پلتفرم ویندوز نیز اجرا شود.
:::
